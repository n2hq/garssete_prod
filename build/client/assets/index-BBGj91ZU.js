import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as s,c as j}from"./components-t0No8UbM.js";import{u as y}from"./NotificationContext-1jS5Nfi7.js";import{u as S,O as A}from"./OperationContext-BXLbD7tl.js";import{$ as E,V as N,s as P,W as B,l as L,_ as O}from"./lib-BT3-1uX3.js";import{A as _}from"./AccountLayout-DBMAEIFw.js";import{C as I}from"./ContentLayout-MiHCT0tf.js";import{u as k}from"./AuthContext-DiZM8Ihb.js";import{L as C}from"./LoadingMessage-DZ85Xo9V.js";import"./UserMenu-DrxnraDn.js";import"./index-C3rlSFmg.js";import"./HomeNav-B6uN5o21.js";import"./SrchNavbar-CF-Acj45.js";import"./HamburgerSecondary-C327styB.js";import"./json-DeAxj4L5.js";import"./BusinessMenu-uzVQD1wl.js";import"./BusinessDrawer-C6Q7zt5F.js";const $=({userGuid:n,businessGuid:c})=>{const[a,m]=s.useState(null),[i,p]=s.useState(!0);y();const[l,h]=s.useState(!1),{showOperation:u,showSuccess:d,showError:o,showWarning:b,showInfo:g,completeOperation:v}=S();s.useEffect(()=>{try{E(n,c).then(t=>{m(t[0].active_status),p(!1)})}catch{console.log("Could not fetch business")}},[]);const f=async()=>{h(!0),u("processing",""),await new Promise(r=>setTimeout(r,1e3));const t=!a;try{const r=`/api/listing/activate/${n}/${c}`,x=N.BASE_URL+r,T=await fetch(x,{method:"PUT",headers:P,body:JSON.stringify({user_guid:n,business_guid:c,active:t})});d("success","Operation completed successfully"),v(),await new Promise(w=>setTimeout(w,1e3))}catch(r){o("error",`Error processing: ${r.message}`)}finally{m(t)}};return i?e.jsx("div",{children:"Loading..."}):e.jsx("div",{children:e.jsxs("div",{className:`p-6  rounded  max-w-2xl
        mx-auto mt-12`,children:[e.jsx("div",{className:"mb-6 text-[13.5px] border-b pb-3",children:"If you deactivate your data all your data will still be intact, however, it will no longer be visible across all Garssete.com platforms."}),e.jsxs("h2",{className:"text-lg mb-1 font-semibold",children:[a?"Deactivate":"Activate","Â Business or Organization"]}),e.jsx("div",{className:"mb-5",children:a?"Your data is active. It will be visible across all Garssete.com platforms.":"Your data is deactivated, it will no longer be visible. However, all your data will still be intact."}),e.jsx("div",{className:"border-[3px] border-gray-100 p-5 rounded-lg shadow",children:e.jsxs("label",{className:`flex items-center space-x-4 hover:cursor-pointer
                        `,children:[e.jsx("input",{type:"checkbox",checked:a??!1,onChange:f,className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a?"Active":"Inactive"}),e.jsxs("div",{className:"font-normal text-sm",children:["Click to ",a?"deactivate":"activate"," this business profile."]})]})]})})]})})},se=()=>{s.useEffect(()=>{B(localStorage)},[]);const[n,c]=s.useState(!0),[a,m]=s.useState(null),[i,p]=s.useState(""),[l,h]=s.useState(""),{business_guid:u,user_guid:d}=j(),[o,b]=s.useState(null),g=k();if(!g)return null;const{user:v}=g;return s.useEffect(()=>{const f=async(t,r)=>{p(t),h(r);const x=await O(t||"");b(x)};try{u&&d&&f(u,d)}catch(t){L(t)}},[u,d]),s.useEffect(()=>{},[v]),s.useEffect(()=>{i&&l&&o&&(m({businessGuid:i,userGuid:l,businessProfile:o}),c(!1))},[i,l,o]),n?e.jsx(C,{}):e.jsx(_,{children:e.jsx(I,{title:`${o.active_status?"Deactivate":"Activate"} Business Profile`,businessGuid:i,data:a,businessProfile:o,children:e.jsx(A,{children:a&&e.jsx($,{userGuid:l,businessGuid:i})})})})};export{se as default};
