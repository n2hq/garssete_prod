import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{u as k,s as P}from"./zod-VB2z1YQj.js";import{r as s,a as E,L as R}from"./components-BgCvqN9p.js";import{z as r}from"./index-C4bLmoCR.js";import{u as C}from"./OperationContext-C5fIEC6d.js";import{u as F}from"./AuthContext-BPv_IBiw.js";import{Z as d}from"./lib-7vfO7jPT.js";import{u as I}from"./NotificationContext-B2jwTR9n.js";import{A}from"./AuthHeader-BHHSunR4.js";const L=r.object({username:r.string({message:"Please enter an email"}).min(1,{message:"Please enter an email"}).email({message:"Please enter a valid email"})});r.object({username:r.string({message:"Please enter your email or username"}).min(1,{message:"This field is required"}).email({message:"Please enter a valid email address"})});function O(){const[u,g]=s.useState(!1),[x,T]=s.useState(!1);s.useEffect(()=>{g(!0)},[]);const[W,z]=s.useState(null),o=F();if(!o)return null;const[l,i]=s.useState(!1);I();const f=E(),[B,h]=s.useState(!1),{showOperation:p,showError:b,completeOperation:c,showSuccess:w}=C(),j=async N=>{i(!0),p("processing"),await new Promise(a=>setTimeout(a,1e3));const S={email:N.username},n=await o.resetpw(S);JSON.stringify(n).includes("Error")?(i(!1),b("Error",d(n)),c()):(w("Success",d(n)),await new Promise(a=>setTimeout(a,1e3)),c(),i(!1),h(!0))},{register:y,handleSubmit:v,getValues:q,watch:H,setError:J,formState:{errors:t,isSubmitting:m}}=k({defaultValues:{},resolver:P(L)});return e.jsx("div",{className:"min-h-screen w-screen min-w-screen bg-black/50 flex items-center justify-center p-4",children:e.jsx("div",{className:`bg-white rounded-2xl shadow-xl overflow-hidden w-full max-w-sm transition-all duration-700 ease-in-out transform ${u?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:e.jsxs("div",{className:"pb-8",children:[e.jsx("div",{className:"flex justify-center mb-6 mt-0 py-3 bg-gray-50 border-b",children:e.jsx("div",{className:"text-2xl font-[600] tracking-tighter font-poppins text-gray-700",children:"Reset Password"})}),e.jsxs("div",{className:"px-8",children:[x?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-16 h-16 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Check Your Email"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We've sent password reset instructions to your email address. Please check your inbox and follow the instructions to reset your password."}),e.jsx("button",{onClick:()=>f("/web/signin"),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Return to Sign In"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Enter your email address and we'll send you instructions to reset your password."}),e.jsxs("form",{onSubmit:v(j),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{...y("username"),id:"username",type:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-300",placeholder:"your.email@example.com",autoComplete:"email"}),e.jsx("div",{className:"w-full mt-2 text-red-600 text-[11px] leading-[1.3em]",children:(t==null?void 0:t.username)&&e.jsx("div",{children:t.username.message})})]}),e.jsx("button",{type:"submit",disabled:m||l,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m||l?"Sending Instructions...":"Send Reset Instructions"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",e.jsx(R,{to:"/web/signin",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-300",children:"Sign in"})]})})]})]})})})}const V=()=>e.jsxs("div",{className:`bg-white w-full 
        md:bg-[url('/images/drone.jpg')]
        bg-cover bg-center min-h-screen flex place-content-center `,children:[e.jsx(A,{}),e.jsx(O,{})]}),_=()=>e.jsx("div",{children:e.jsx(V,{})});export{_ as default};
