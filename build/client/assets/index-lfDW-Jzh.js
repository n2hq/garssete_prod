import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as x,d as B,a as U,b as z,u as D,w as G}from"./components-BgCvqN9p.js";import{ae as M,N as A,a9 as k,aa as T,ab as H,af as W,ag as K,ad as F,ac as O,$ as Q,a2 as V,ah as J,a1 as X}from"./lib-yTOo7XCn.js";import{R as I,T as Y,A as Z,C as L,a as g,F as ee}from"./Categories-BsiyMy-1.js";import{S as ae}from"./SrchNavbar-3NYx9nnR.js";import"./UserMenu-XeS_t7cM.js";import"./AuthContext-jYNbaFtL.js";import"./index-WNiYugoE.js";import"./HamburgerSecondary-BwwaPQMk.js";import"./json-DZIPjdM1.js";const q=({averageRating:a})=>{const[m,u]=x.useState(0);return x.useEffect(()=>{a!=null&&u(a)},[a]),e.jsxs("div",{className:"text-blue-700",children:["(",M(Number(m)),")"]})},re=({listing:a})=>{var _;const[m,u]=x.useState("/images/placeholder22.png"),[l,o]=x.useState(""),[h,p]=x.useState(""),[d,f]=x.useState(null),[b,y]=x.useState(""),[t,N]=x.useState(null),[j,$]=x.useState(null),[E,P]=x.useState("");return x.useEffect(()=>{if(a){const c=a;N(c),c!=null&&c.image_url?o(A.IMG_BASE_URL+(c==null?void 0:c.image_url)):o(m)}},[a]),x.useEffect(()=>{a!=null&&a.website?y(a==null?void 0:a.website):(a==null?void 0:a.username)===""||(a==null?void 0:a.username)===null?y("/"+(a==null?void 0:a.gid)):y("/"+(a==null?void 0:a.username))},[a]),x.useEffect(()=>{a&&((a==null?void 0:a.image_url)!==""&&(a==null?void 0:a.image_url)!==null&&(a==null?void 0:a.image_url)!==void 0?o(A.IMG_BASE_URL+(a==null?void 0:a.image_url)):o(m),(a==null?void 0:a.username)!==""&&(a==null?void 0:a.username)!==null&&(a==null?void 0:a.username)!==void 0?p(a==null?void 0:a.username):p(a==null?void 0:a.gid))},[a]),x.useEffect(()=>{if(a!=null&&a.social_media){let c=[];const s=k(a==null?void 0:a.social_media,",");s!==null&&(s==null||s.map((n,w)=>{const S=k(n,"$"),C={mediaName:S[0],mediaHandle:S[1],baseUrl:S[2]};c.push(C)})),f(c)}},[a]),x.useEffect(()=>{},[d]),x.useEffect(()=>{if(t!=null&&t.facility_features){let c=[];const s=k(t==null?void 0:t.facility_features,"&");s!==null&&(s==null||s.map((w,S)=>{const C=k(w,"$"),r={featureId:C[0],userDescription:C[1]};c.push(r)}));const n=T(c);$(n)}},[t]),x.useEffect(()=>{a!==null&&(async s=>{let n=s==null?void 0:s.title;n+=s!=null&&s.address_one?", "+(s==null?void 0:s.address_one):"",n+=s!=null&&s.address_two?", "+(s==null?void 0:s.address_two):"",n+=s!=null&&s.city_name?", "+(s==null?void 0:s.city_name):"",n+=s!=null&&s.state_name?", "+(s==null?void 0:s.state_name):"",n+=s!=null&&s.zipcode?", "+(s==null?void 0:s.zipcode):"",n+=s!=null&&s.country_name?", "+(s==null?void 0:s.country_name):"";let w=`https://www.google.com/maps/search/?api=1&query=${n}`;P(w)})(a)},[a]),e.jsxs("div",{className:"bg-white w-full h-auto  overflow-hidden border   hover:shadow-md hover:shadow-gray-200 md:rounded-xl",children:[e.jsx("div",{className:"bg-gray-50/30 py-3 px-4 border-b-0",children:e.jsxs("a",{href:`/${h}`,children:[e.jsxs("div",{className:"flex place-content-between gap-2",children:[e.jsxs("div",{className:"flex place-items-start gap-2 w-full",children:[e.jsx("div",{className:"w-[90px] h-[90px] min-w-[90px]   bg-black bg-cover bg-center overflow-hidden relative border border-gray-300",children:e.jsx("img",{src:l,alt:"",className:`object-cover w-full h-full text-sm
                             z-0 bg-white`})}),e.jsxs("div",{className:" w-full",children:[e.jsx("div",{className:"text-[18px] font-normal text-blue-800 line-clamp-1 w-full",children:a==null?void 0:a.title}),(a==null?void 0:a.category)&&e.jsx("div",{className:"text-[12px] text-gray-500  capitalize mt-[0px]",children:(_=H(a==null?void 0:a.category))==null?void 0:_.name}),e.jsxs("div",{className:"flex place-items-center gap-x-1 mt-[5px] ",children:[e.jsx("div",{children:(t==null?void 0:t.average_rating)!==null&&(t==null?void 0:t.average_rating)!==""&&(t==null?void 0:t.average_rating)!==void 0?e.jsxs("div",{className:" flex gap-2 place-items-center",children:[e.jsx(I,{rating:Number(t==null?void 0:t.average_rating)}),e.jsx(q,{averageRating:t==null?void 0:t.average_rating})]}):e.jsxs("div",{className:" flex gap-2 place-items-center",children:[e.jsx(I,{rating:1}),e.jsx(q,{averageRating:0})]})}),e.jsx("div",{className:" ",children:Number(t==null?void 0:t.total_reviews)>0?t==null?void 0:t.total_reviews:0})]})]})]}),e.jsx("div",{className:"flex place-items-start",children:e.jsx("div",{className:"font-bold rounded-sm border px-3 py-[2px]",children:"View"})})]}),e.jsx("div",{className:"mt-[8px] text-[14px] md:text-[13px] text-gray-800 leading-[1.3em] line-clamp-3",children:a==null?void 0:a.short_description})]})}),e.jsx("div",{children:e.jsxs("div",{className:" h-auto flex place-content-between gap-2 ",children:[e.jsxs("div",{className:"flex place-items-start w-[60%] flex-col  pl-4  pt-2 pb-4 ",children:[e.jsxs("div",{className:"flex place-items-center gap-x-1",children:[e.jsx(W,{}),e.jsxs("span",{className:"mt-[1px] text-gray-500 space-x-2",children:[e.jsx("span",{className:"font-bold",children:"Founded:"}),e.jsx("span",{children:a==null?void 0:a.established})]})]}),j!==null&&e.jsxs("div",{className:"mt-2 flex place-items-start gap-2 w-full relative",children:[e.jsx("span",{className:"text-[13px]",children:"Facilities: "}),e.jsx("div",{className:"flex place-items-baseline gap-3 flex-wrap leading-[0.9em] ",children:j==null?void 0:j.map((c,s)=>e.jsx(Y,{tooltip:`${c==null?void 0:c.name}: ${(c==null?void 0:c.userDescription)||""}`,children:e.jsx("div",{className:"text-[15px]",children:c==null?void 0:c.icon})},s))})]})]}),e.jsxs("div",{className:"flex place-items-end flex-col w-[40%] text-end pr-4 pt-2 pb-4",children:[e.jsx("div",{className:"font-[600]",children:a==null?void 0:a.phone}),e.jsx("div",{className:"text-[12px] leading-[1.2em] mt-1",children:e.jsx(Z,{listing:a})})]})]})}),e.jsx("div",{className:"border-none",children:e.jsxs("div",{className:"flex place-content-between mx-4 my-1",children:[e.jsxs("div",{className:"flex place-items-center gap-4",children:[e.jsx("a",{href:`mailto:${a==null?void 0:a.email_address}`,children:e.jsx(K,{size:20})},34),(a==null?void 0:a.phone)&&e.jsx("a",{href:`tel:${a==null?void 0:a.phone}`,children:e.jsx(F,{size:20})},30),d!==null&&(d==null?void 0:d.map((c,s)=>e.jsx("a",{href:`${c==null?void 0:c.baseUrl}${c==null?void 0:c.mediaHandle}`,children:O(c==null?void 0:c.mediaName)},s)))]}),e.jsx("div",{className:"px-1.5 py-0.5 bg-red-500 rounded hover:shadow-lg text-white",children:e.jsx("a",{href:`${b}`,children:"Website"})})]})}),e.jsx("div",{className:"px-4 mb-4 mt-8",children:e.jsxs("div",{className:" grid grid-cols-2 gap-2 w-full md:w-[50%]",children:[e.jsx("a",{target:"_blank",href:`${E}`,className:"border border-blue-400 py-[5px] rounded px-2 font-semibold w-full text-center",children:"Go to map"}),e.jsx("div",{children:(t==null?void 0:t.phone)&&e.jsx("a",{href:`tel:${t==null?void 0:t.phone}`,children:e.jsxs("button",{className:"bg-blue-700 rounded w-full text-white flex place-items-center place-content-center text-[15px] gap-2 py-[5px]",children:[e.jsx(F,{size:20,className:"mt-[2px]"}),e.jsx("span",{children:"Call"})]})})})]})})]})},se=()=>e.jsx("div",{className:"bg-white w-full h-auto md:rounded-t-md shadow-md overflow-hidden border",children:e.jsxs("div",{className:"bg-gray-50/30 py-3 px-4 border-b",children:[e.jsxs("div",{className:"flex place-content-between",children:[e.jsx("div",{className:"flex place-items-center gap-2",children:e.jsxs("div",{className:"-space-y-1",children:[e.jsx("div",{className:"text-black text-lg font-semibold",children:"Garsset.com"}),e.jsx("div",{className:"text-[12px] text-gray-500 italic capitalize",children:"Business Directory Service"})]})}),e.jsx("div",{className:"flex place-items-center"})]}),e.jsx("div",{className:"mt-[8px] text-[12px] text-gray-500 leading-[1.3em]",children:"The only real-time generative AI app for video chatting, live streaming, and video creation on the market."})]})});function R({pagination:a}){var p;const[m]=B(),u=a.currentPage,l=a.totalPages,o=()=>{if(l<=7)return Array.from({length:l},(f,b)=>b+1);const d=[];switch(d.push(1),u){case 1:d.push(2,3,"...",l);break;case 2:d.push(2,3,4,"...",l);break;case 3:d.push(2,3,4,5,"...",l);break;case l-2:d.push("...",l-3,l-2,l-1,l);break;case l-1:d.push("...",l-3,l-2,l-1,l);break;case l:d.push("...",l-2,l-1,l);break;default:d.push("...",u-1,u,u+1,"...",l);break}return d},h=d=>{const f=new URLSearchParams(m);return f.set("page",d.toString()),`?${f.toString()}`};return e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(u-1)*a.itemsPerPage+1," to"," ",Math.min(u*a.itemsPerPage,a.totalItems)," of"," ",a.totalItems," items"]}),e.jsxs("nav",{className:"flex items-center space-x-1",children:[e.jsx("a",{href:a.hasPrev?h(u-1):"#",className:`px-3 py-2 border rounded-md text-sm font-medium ${a.hasPrev?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!a.hasPrev,onClick:d=>!a.hasPrev&&d.preventDefault(),children:"Prev"}),(p=o())==null?void 0:p.map((d,f)=>typeof d=="number"?e.jsx("a",{href:h(d),className:`px-3 py-2 border rounded-md text-sm font-medium ${d===u?"bg-blue-500 text-white border-blue-500":"text-gray-700 hover:bg-gray-100"}`,children:d},d):e.jsx("span",{className:"px-3 py-2 text-gray-500",children:d},`ellipsis-${f}`)),e.jsx("a",{href:a.hasNext?h(u+1):"#",className:`px-3 py-2 border rounded-md text-sm font-medium ${a.hasNext?"text-gray-700 hover:bg-gray-100":"opacity-50 cursor-not-allowed text-gray-400"}`,"aria-disabled":!a.hasNext,onClick:d=>!a.hasNext&&d.preventDefault(),children:"Next"})]})]})}const ce=({loading:a=!1,initialFilters:m={q:"",category:"",country:"",state:"",city:""}})=>{const u=U(),l=z(),[o,h]=x.useState(m),[p,d]=x.useState([]),[f,b]=x.useState([]),[y,t]=x.useState([]),[N,j]=x.useState([]);x.useEffect(()=>{const r=new URLSearchParams(l.search);h({q:r.get("q")||"",category:r.get("category")||"",country:r.get("country")||"",state:r.get("state")||"",city:r.get("city")||""})},[l.search]),x.useEffect(()=>{$(),E()},[]),x.useEffect(()=>{o.country?P(o.country):t([])},[o.country]),x.useEffect(()=>{o.country&&o.state?_(o.country,o.state):j([])},[o.country,o.state]);const $=async()=>{const r=Q.sort((v,i)=>v.name.localeCompare(i.name));d(r)},E=async()=>{try{const r=await V();b(r||[])}catch(r){console.error("Failed to fetch countries:",r)}},P=async r=>{try{const v=await J(r);t(v||[])}catch(v){console.error("Failed to fetch countries:",v)}},_=async(r,v)=>{try{const i=await X(r,v);j(i||[])}catch(i){console.error("Failed to fetch countries:",i)}},c=(r,v)=>{h(i=>({...i,[r]:v}))},s=r=>{c("country",r),P(r)},n=r=>{c("state",r),_(o.country,r)},w=()=>{const r=new URLSearchParams;o.q&&r.set("q",o.q),o.category&&r.set("category",o.category),o.country&&r.set("country",o.country),o.state&&r.set("state",o.state),o.city&&r.set("city",o.city),r.set("page","1"),u(`${l.pathname}?${r.toString()}`)},S=r=>{r.key==="Enter"&&w()},C=()=>{u(l.pathname)};return e.jsxs("div",{className:"w-full space-y-3 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{id:"query",type:"text",value:o.q,onChange:r=>c("q",r.target.value),onKeyPress:S,placeholder:"Hotel, Restaurant or ABC Inc.",className:"w-full px-3 border border-gray-300 rounded outline-none h-[35px] focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:a})}),e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"category",value:o.category,onChange:r=>c("category",r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:a,children:[e.jsx("option",{value:"",children:"All Categories"}),p.map((r,v)=>e.jsx("option",{value:r==null?void 0:r.id,children:r==null?void 0:r.name},r==null?void 0:r.id))]})})]}),e.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"country",value:o.country,onChange:r=>s(r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:a,children:[e.jsx("option",{value:"",children:"All Countries"}),f.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})}),e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"state",value:o.state,onChange:r=>n(r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:a||!o.country,children:[e.jsx("option",{value:"",children:"All States"}),y.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})})]}),e.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"city",value:o.city,onChange:r=>c("city",r.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:a||!o.state,children:[e.jsx("option",{value:"",children:"All Cities"}),N==null?void 0:N.map(r=>e.jsx("option",{value:r.name,children:r.name},r.id))]})}),e.jsxs("div",{className:"w-full flex gap-2",children:[e.jsx("button",{onClick:w,disabled:a,className:"flex-1 bg-blue-600 text-white h-[35px] px-4 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Searching...":"Search"}),e.jsx("button",{onClick:C,disabled:a,className:"px-4 h-[35px] border border-gray-300 rounded text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})]}),a&&e.jsx("div",{className:"text-center text-blue-600 text-sm",children:"Loading results..."})]})},fe=()=>{const a=D(),[m,u]=B(),l=G(),o=a.data.items||[],h=a.data.pagination,p=a.query,d=a.countries,[f,b]=x.useState(null);parseInt(m.get("page")||"1");const y=l.state==="loading";x.useEffect(()=>{p&&b(p)},[p]);const t={q:m.get("q")||"",category:m.get("category")||"",country:m.get("country")||"",state:m.get("state")||"",city:m.get("city")||""};return e.jsxs("div",{className:" ",children:[e.jsx(ae,{}),e.jsxs("div",{className:"h-screen flex flex-col relative ",children:[e.jsx("div",{className:"mt-[120px] md:mt-[60px]"}),e.jsxs("div",{className:"grid grid-cols-12 h-full overflow-hidden  gap-5 ",children:[e.jsxs("aside",{className:"col-span-3 h-full overflow-y-auto scrollbar-hidden pt-2 hidden xl:block",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Search Filter"}),e.jsx(ce,{loading:y,initialFilters:t})]}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Categories"}),e.jsx(L,{})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx("div",{className:"mt-3 text-[17px] mb-4 font-bold ml-6",children:"Countries"}),d&&e.jsx(g,{countries:d})]}),e.jsx("div",{className:" py-4 px-4 border-t",children:"Garssete - Business Directory Listing"})]}),e.jsx("div",{className:"col-span-12 xl:col-span-9  overflow-y-auto w-full md:px-[15px]",children:e.jsxs("div",{className:"grid grid-cols-12 gap-5",children:[e.jsx("div",{className:"col-span-12 md:col-span-8  pt-3",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(R,{pagination:h}),o==null?void 0:o.map((N,j)=>e.jsx(re,{listing:N},j)),e.jsx(R,{pagination:h}),e.jsx(se,{})]})}),e.jsx("div",{className:"hidden md:block md:col-span-4 pt-3    ",children:e.jsx("div",{className:"w-full xl:w-[90%] sticky top-3 ml-auto",children:e.jsx(ee,{})})})]})})]})]})]})};export{fe as default};
